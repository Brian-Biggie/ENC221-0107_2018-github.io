<!DOCTYPE html>
<html>
<head>
  <title>Map Application</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet/dist/leaflet.css" />
  <style>
    #map {
      height: 400px;
      width: 100%;
    }
  </style>
</head>
<body>
  <h1>Map Application</h1>

  <div>
    <input type="text" id="searchInput" placeholder="Search...">
    <button onclick="search()">Search</button>
  </div>

  <div>
    <h2>Filters</h2>
    <label>
      <input type="checkbox" id="filter1" onchange="applyFilters()"> Filter 1
    </label>
    <label>
      <input type="checkbox" id="filter2" onchange="applyFilters()"> Filter 2
    </label>
  </div>

  <div id="map"></div>

  <script src="https://cdn.jsdelivr.net/npm/leaflet/dist/leaflet.js"></script>
  <script>
    const map = L.map('map').setView([0, 0], 2);
    let markers = [];

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: 'Map data Â© <a href="https://openstreetmap.org">OpenStreetMap</a> contributors'
    }).addTo(map);

    function displayLocations() {
      const searchInput = document.getElementById('searchInput').value.toLowerCase();
      const filter1 = document.getElementById('filter1').checked;
      const filter2 = document.getElementById('filter2').checked;

      markers.forEach(marker => marker.removeFrom(map));
      markers = [];

      data.forEach(location => {
        if (
          location.name.toLowerCase().includes(searchInput) &&
          (filter1 ? location.filter1 : true) &&
          (filter2 ? location.filter2 : true)
        ) {
          const marker = L.marker([location.lat, location.lng]).addTo(map);
          marker.bindPopup(location.name);
          markers.push(marker);
        }
      });
    }

    function search() {
      displayLocations();
    }

    function applyFilters() {
      displayLocations();
    }

    fetch('data.json')
      .then(response => response.json())
      .then(data => {
        displayLocations();
      })
      .catch(error => {
        console.error('Error loading JSON data:', error);
      });
  </script>
  <script src="data.json"></script>
</body>
</html>
